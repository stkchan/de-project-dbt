snapshots:
  - name: bronze_dim_customer_snapshot_scd_type_2
    description: "SCD Type 2 snapshot tracking changes in bronze schema"
    relation: ref('bronze_dim_customer')
    config:
      database: '{{ target.catalog }}'
      schema: scd
      unique_key: customer_sk
      strategy: timestamp
      updated_at: updated_at
      dbt_valid_to_current: NULL # Specifies that current records should have `dbt_valid_to` set to `'9999-12-31'` instead of `NULL`

  - name: bronze_dim_product_snapshot_scd_type_2
    description: "SCD-Type-2 snapshot tracking changes in bronze_dim_product"
    relation: ref('bronze_dim_product')
    config:
      database: '{{ target.catalog }}'
      schema: scd
      unique_key: product_sk
      strategy: timestamp
      updated_at: updated_at
      dbt_valid_to_current: NULL # Specifies that current records should have `dbt_valid_to` set to `'9999-12-31'` instead of `NULL`